<?php//Autocomplete financementsif (isset($_GET['term'])){	$return_arr = array();	$reqIdh = "https://api.archives-ouvertes.fr/ref/europeanproject/?q=(title_t:".$_GET['term']."*%20OR%20acronym_t:".$_GET['term']."*%20OR%20reference_t:".$_GET['term']."*%20OR%20callId_t:".$_GET['term']."*%20OR%20financing_t:".$_GET['term']."*)%20AND%20valid_s:%22VALID%22&fl=docid,reference_s,financing_s,callId_s,acronym_s,title_s,valid_s,startDtae_s,endDate_tdate&rows=500&sort=docid%20ASC";	$reqIdh = str_replace(' ', '%20', $reqIdh);	$contents = file_get_contents($reqIdh);	$results = json_decode($contents);	$numFound = 0;	if (isset($results->response->numFound)) {$numFound = $results->response->numFound;}		if ($numFound != 0) {		foreach($results->response->docs as $entry) {			if (isset($entry->docid)) {$docid = $entry->docid;}else{$docid = "";}			if (isset($entry->reference_s)) {$refer = $entry->reference_s;}else{$refer = "";}			if (isset($entry->financing_s)) {$finan = $entry->financing_s;}else{$finan = "";}			if (isset($entry->callId_s)) {$calid = $entry->callId_s;}else{$calid = "";}			if (isset($entry->acronym_s)) {$acron = $entry->acronym_s;}else{$acron = "";}			if (isset($entry->title_s)) {$titre = $entry->title_s;}else{$titre = "";}			if (isset($entry->startDate_tdate)) {$anneS = $entry->startDate_tdate;}else{$anneS = "";}			if (isset($entry->endDate_tdate)) {$anneE = $entry->endDate_tdate;}else{$anneE = "";}			if (isset($entry->valid_s)) {$valid = $entry->valid_s;}else{$valid = "";}			$return_arr[] = $docid.'~'.$refer.'~'.$finan.'~'.$calid.'~'.$acron.'~'.$titre.'~'.$anneS.'~'.$anneE.'~'.$valid;		}	}		echo json_encode($return_arr);}?>