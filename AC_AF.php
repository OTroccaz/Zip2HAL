<?php//Autocomplete affiliationsif (isset($_GET['term'])){	$return_arr = array();	//VALID	$reqAff = "https://api.archives-ouvertes.fr/ref/structure/?q=name_t:(".$_GET['term'].")%20AND%20valid_s:%22VALID%22&rows=1000&fl=label_s,docid,valid_s&sort=docid%20asc";	$reqAff = str_replace(' ', '%20', $reqAff);	$contents = file_get_contents($reqAff);	$results = json_decode($contents);	if (isset($results->response->numFound)) {$numFound = $results->response->numFound;}		if ($numFound != 0) {		foreach($results->response->docs as $entry) {			//if ($entry->valid_s == "VALID") {$txtcolor = '#339966';}else{$txtcolor = '#ff6600';}			$return_arr[] = $entry->label_s.' ('.$entry->valid_s.') ~ ('.$entry->docid.')';		}	}		//INCOMING	$reqAff = "https://api.archives-ouvertes.fr/ref/structure/?q=name_t:(".$_GET['term'].")%20AND%20valid_s:%22INCOMING%22&rows=1000&fl=label_s,docid,valid_s&sort=docid%20asc";	$reqAff = str_replace(' ', '%20', $reqAff);	$contents = file_get_contents($reqAff);	$results = json_decode($contents);	if (isset($results->response->numFound)) {$numFound = $results->response->numFound;}		if ($numFound != 0) {		foreach($results->response->docs as $entry) {			//if ($entry->valid_s == "VALID") {$txtcolor = '#339966';}else{$txtcolor = '#ff6600';}			$return_arr[] = $entry->label_s.' ('.$entry->valid_s.') ~ ('.$entry->docid.')';		}	}		//OLD	$reqAff = "https://api.archives-ouvertes.fr/ref/structure/?q=name_t:(".$_GET['term'].")%20AND%20valid_s:%22OLD%22&rows=1000&fl=label_s,docid,valid_s&sort=docid%20asc";	$reqAff = str_replace(' ', '%20', $reqAff);	$contents = file_get_contents($reqAff);	$results = json_decode($contents);	if (isset($results->response->numFound)) {$numFound = $results->response->numFound;}		if ($numFound != 0) {		foreach($results->response->docs as $entry) {			//if ($entry->valid_s == "VALID") {$txtcolor = '#339966';}else{$txtcolor = '#ff6600';}			$return_arr[] = $entry->label_s.' ('.$entry->valid_s.') ~ ('.$entry->docid.')';		}	}		echo json_encode($return_arr);}?>